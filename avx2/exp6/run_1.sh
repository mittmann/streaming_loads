#!/bin/bash
sizes=( 16 128 512 1024 2048  $((4*1024)) $((6*1024)) $((8*1024)) $((12*1024))  $((14*1024)) $((16*1024)) $((20*1024)) $((24*1024)) $((32*1024)) $((64*1024)) $((128*1024)) $((256*1024))  $((512*1024)) $((1024*1024)) 1572864 )
reps=( 14928740 1082620 128062 63822 31906 15567 9691 5722 1485 993 744 664 715 616 271 124 60 30 15 10 ) 

for i in `seq 4 17`; do
	size1=${sizes[$i]}
	rep=${reps[$i]}
	./a.out  $size1 $rep wb t 16 1 wb t > tmpout 
	cyca=`cat tmpout | grep PAPI_THREAD_A | grep PAPI_TOT_CYC | cut -d: -f3`
	echo $size1,$cyca
	sleep 1
done

